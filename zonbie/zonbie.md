# three.js ゲーム制作仕様書  
**プロジェクト名（仮）：** Underfloor Guardians  
**バージョン：** 0.1 — ゲーム性テスト用プロトタイプ  
**作成日：** 2025-05-31  

C:\work\script\web_simple_apps\zonbie
このフォルダ以下だけを使い、必要なものはinstallしても良い。
github pageで公開し、スマホで実行する事を想定している。

C:\work\script\web_simple_apps\zonbie\zonbie.html
これがstartのhtml
---

## 1. 目的とゴール
- **目的**  
  - “床下の神様”というユニークな視点を活かしたカジュアルゲームを検証する。  
  - 最小構成でゲームサイクルを回し、楽しさ・操作性・難易度を確認する。  
- **このフェーズのゴール**  
  1. **人（青）** がスタート地点からゴールまで歩く。  
  2. **ゾンビ（赤）** が人を追いかけるが、移動速度は人より遅い。  
  3. プレイヤーは床下ビューでエリアを **マルチタップ** し、  
     半径内のゾンビを転倒 → 数秒停止 → 再歩行させる。  
  4. 人がゾンビに捕まらずゴールすればステージクリア。  

---

## 2. ゲーム概要
| 項目 | 内容 |
| --- | --- |
| **ジャンル** | アクション / リアルタイムパズル |
| **プレイ視点** | 床下からの俯瞰（トップビューを上下反転したイメージ） |
| **操作デバイス** | タッチ（PC はマウス複数クリックで代替） |
| **セッション長** | 1 ステージ 30 秒〜1 分想定 |

---

## 3. コアゲームプレイ

### 3.1 フロー
1. ステージ開始 → 人とゾンビがスポーン  
2. **人**：最短ルートでゴールへ直進  
3. **ゾンビ**：最も近い人を追尾  
4. プレイヤーが任意位置をタップ  
5. 振動エリア内にいるゾンビを転倒（ステータス＝`Down`）  
6. `Down` 解除後、ゾンビは再び `Walk` 状態で追尾  
7. いずれかが起こるまでループ  
   - 人が全員ゴール → 勝利  
   - ゾンビが人に接触 → 敗北（テスト版では即リスタート）

### 3.2 操作 & ルール
| アクション | 内容 |
| --- | --- |
| **タップ** | タップ位置中心に円形範囲（半径：UIで調整可）を生成し、範囲内のゾンビをダウン |
| **マルチタップ** | 同一フレームで複数タップ可能（同時 5点程度まで想定） |
| **クールダウン** | なし（テスト段階では制限を設けず操作感を優先） |

---

## 4. エンティティ仕様

| 名称 | 表示 | 基本挙動 | 備考 |
| --- | --- | --- | --- |
| **人 (Human)** | 青い矢印 | ゴールへ直線移動 | 速さ：`1.0` |
| **ゾンビ (Zombie)** | 赤い矢印 | 最近距離の人を追尾 | 速さ：`0.7`<br>ダウン時間：`2.0 s` |
| **プレイヤー (God)** | 床下カメラ | タップで振動生成 | 物理的存在なし |

※ 数値は仮値。テスト中に随時調整。

---

## 5. ビジュアル & UI

将来3dモデルなどでのリッチな表現を目指したいが、ゲーム性の角質までは見た目は最低限にして進行する。

- **床面**：半透明グリッド。床上の矢印の動きを把握しやすくする。  
- **矢印**：  
  - **青** … 人。先端が進行方向を示す。  
  - **赤** … ゾンビ。ダウン中はアイコンを斜めに倒す・点滅させる等で視覚化。  
- **振動エフェクト**：床面にリング波紋アニメーション。  
- **HUD**：左上に残り人数 / 右上に経過時間。  
- **音**（任意）：タップ時の低音“ドン”、ゾンビ転倒時のコミカル効果音。  

---

## 6. 開発ステップ

| ステップ | 目的 | 完了条件 |
| --- | --- | --- |
| **0. セットアップ** | three.js, タッチ入力, ベースカメラ | リポジトリ初期化 & 床下視点でグリッド表示 |
| **1. エンティティ実装** | 人・ゾンビ・簡易追尾 AI | 青/赤矢印が歩き、人がゴールへ到達 |
| **2. プレイヤー操作** | マルチタップ認識 & 円形エフェクト | タップでリングが出る |
| **3. インタラクション** | 振動判定 & ゾンビ転倒 | 範囲内ゾンビが停止し再歩行 |
| **4. 勝敗判定** | クリア / 失敗条件処理 | テキスト表示 or 画面リセット |
| **5. ポリッシュ** | UI, サウンド, パラメータ調整 | テストプレイがストレスなく行える |

---

## 7. 受け入れ基準（このフェーズ）
- 任意のデバイスで **同時複数タップ** に応答する。  
- ゾンビの `Down` → `Walk` への復帰が自然に見える。  
- 人が 1 体でもゾンビに触れずゴール可能。  
- 30 fps 以上で安定動作。  

---

## 8. 今後の拡張アイデア（参考）

| 分類 | 例 |
| --- | --- |
| **ギミック** | 動かせる壁・落とし穴・爆発樽 |
| **地形** | 起伏付き床、複数階層 |
| **ゾンビ種類** | 早歩き・ジャンプ・遠距離攻撃 |
| **スコアリング** | クリアタイム、助けた人数 |
| **マルチプレイ** | 協力タップ / 対戦 |

---

## 9. 管理項目
- **バックログ**：GitHub Projects にタスク登録  
- **コミュニケーション**：Slack #underfloor-dev  
- **レビューサイクル**：週 2 回のデモ & フィードバック  

---

*以上、ゲーム性テスト版の仕様書。技術詳細・最適化は次フェーズ以降で定義。*

内容が変わったらmdも更新する事。