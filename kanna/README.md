# 🎮 傾き視差キューブデモ

端末の傾きでキューブに視差効果を与えるThree.jsデモアプリケーション

## 🎯 概要

このアプリケーションは、スマートフォンの傾きセンサー（DeviceOrientation API）を使用して、3Dキューブに擬似的な立体視効果（パララックス）を提供します。端末を前後左右に傾けると、カメラ位置が微調整され、キューブが奥行きを持って見えるような視覚効果を実現します。

## ✨ 機能

- 📱 **端末傾き検出**: β（前後チルト）とγ（左右チルト）を検出
- 🎨 **視差効果**: カメラ位置を動的に調整してパララックス効果を実現
- 💻 **デスクトップ対応**: マウス操作でも同様の効果を体験可能
- 🔍 **リアルタイムデバッグ**: 傾き角度とオフセット値をリアルタイム表示
- 🍎 **iOS対応**: iOS 13+のDeviceOrientation許可要求に対応

## 🚀 使用方法

### ローカル実行

1. HTTPSサーバーでファイルを配信（DeviceOrientation APIはHTTPS必須）:
   ```bash
   # Python 3の場合
   python -m http.server 8000
   
   # Node.jsのhttp-serverを使用する場合
   npx http-server -p 8000
   ```

2. スマートフォンでアクセス:
   ```
   https://your-local-ip:8000/kanna/
   ```

### GitHub Pages デプロイ

1. このフォルダをリポジトリのルートまたは`docs`フォルダに配置
2. GitHub PagesでHTTPS配信を有効化
3. スマートフォンからアクセス

## 📱 動作環境

- **iOS**: Safari（iOS 13+では許可ボタンのタップが必要）
- **Android**: Chrome, Firefox等
- **デスクトップ**: マウス操作でのフォールバック動作

## ⚙️ 調整パラメータ

アプリケーションの挙動は以下のパラメータで調整できます（`js/app.js`内）:

| パラメータ | 説明 | デフォルト値 | 推奨範囲 |
|-----------|------|-------------|----------|
| `MAX_DEG` | 傾き角の上限（これ以上傾けても視差が増えない） | 20° | 15°〜25° |
| `RANGE` | カメラ移動の最大幅（ワールド座標） | 0.05 | 0.03〜0.10 |
| `BASE_Z` | カメラの基準距離 | 3 | 2〜5 |

## 🔧 技術仕様

- **ライブラリ**: Three.js r128（CDN）
- **API**: DeviceOrientation API
- **対応ブラウザ**: モダンブラウザ（ES6+）
- **レンダリング**: WebGL

## 📁 ファイル構成

```
kanna/
├── index.html           # メインHTML
├── js/
│   └── app.js          # アプリケーションロジック
├── plan.md             # 実装ガイド
└── README.md           # このファイル
```

## 🐛 トラブルシューティング

### デバイス傾きが検出されない
- HTTPSで配信されているか確認
- iOS Safari のプライベートモードを無効化
- 「デバイス傾き検出を有効にする」ボタンをタップ（iOS）

### 視差効果が感じられない
- `RANGE`パラメータを大きくする（0.1程度）
- 端末をゆっくりと傾ける
- デバッグ表示でオフセット値が変化しているか確認

### パフォーマンスが悪い
- `renderer.setPixelRatio()`の値を下げる
- アンチエイリアスを無効化（`antialias: false`）

## 🚀 発展アイデア

1. **多層視差**: 複数のオブジェクトに異なる深度で視差を適用
2. **物理シミュレーション**: 急激な傾きでキューブが揺れる効果
3. **パーティクルエフェクト**: 背景にパーティクルを追加して奥行き感を強化
4. **ジャイロスコープ連携**: より精密な回転検出

## 📜 ライセンス

このプロジェクトはMITライセンスの下で提供されています。