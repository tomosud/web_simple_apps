# 🪚 スマホ加速度ゲーム『鉋スライダー』開発指針

## 1. 企画概要
- **テーマ**：大工道具「鉋（かんな）」をスマホごと台の上で滑らせ、削り屑（かんなくず）をどこまで長く連続で生み出せるかを競うミニゲーム。
- **操作感**：端末を前後にスムーズにスライド。加速度が安定していれば削り屑が伸び、乱れた瞬間に千切れてスコア確定。
- **対象環境**：iPhone Safari（iOS 13 以降）。GitHub Pages 上で動作。

## 2. 技術スタック
| 分類 | 採用技術 | 理由 |
|------|----------|------|
| **フロント** | HTML5 / ES Modules | ブラウザのみで完結。 |
| **センサー** | DeviceMotionEvent (W3C Device Orientation API) | iOS で加速度取得が可能。許可ダイアログ要。 |
| **描画** | 任意のリアルタイムグラフライブラリ<br>(例: Chart.js + chartjs‑plugin‑streaming) | 波形表示を簡易に実装可。 |
| **ホスティング** | GitHub Pages (HTTPS) | 無料・Secure Context 必須 API 対応。 |

## 3. フェーズロードマップ（高レベル）
| フェーズ | 目的 |
|---------|------|
| **Stage 1** | 加速度 (X Y Z) を ECG 風のリアルタイムグラフで可視化。 |
| **Stage 2** | スライド動作の安定判定：連続時間を計測し、乱れで停止。 |
| **Stage 3** | 削り屑ビジュアル化：Canvas / WebGL でリボン状パーティクルを生成。 |
| **Stage 4** | ゲーム化：スコア表示、ベスト更新、SNS シェア。 |
| **Stage 5** | 仕上げ：PWA 化、ハプティック、マルチ言語など。 |

## 4. Stage 1 要求仕様（コードレス要約）
1. **ユーザー許可フロー**  
   - 画面に「センサーを許可」ボタンを配置。  
   - タップ内で `DeviceMotionEvent.requestPermission()` を呼び出す。  
2. **データ取得**  
   - 取得軸：`acceleration`（重力除去）を優先、fallback として `accelerationIncludingGravity`。  
   - サンプリング目標：60 fps 程度。  
3. **グラフ表示**  
   - 横軸＝時間（右→左へ流れる）。縦軸＝m/s²。  
   - X Y Z を色分け。（例: 赤= X, 緑= Y, 青= Z）  
   - 表示幅は直近 10 秒程度。  
4. **テスト方法**  
   - GitHub Pages にデプロイ → iPhone でアクセス → 許可 → 端末を振り、波形が動くことを確認。  

## 5. コーディング方針
- 依存は CDN で読み込み、ローカルビルド不要とする。  
- マジックナンバーは `CONFIG` オブジェクトに集約し、後工程で調整しやすく。  
- 将来フェーズを見据え、ディレクトリは `/docs` 直下に `index.html`, `js/`, `css/` を配置。  

---

*以上。細部は実装担当と相談しつつ柔軟に調整して進める。*